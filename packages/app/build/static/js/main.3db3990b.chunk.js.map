{"version":3,"sources":["../../src/index.ts","components/chat/Chat/Chat.module.scss","components/pages/Home/Home.module.scss","../../../src/dtos/player.dto.ts","../../../src/dtos/world.dto.ts","components/web/Button/Button.module.scss","components/web/Card/Card.module.scss","components/web/Container/Container.module.scss","components/web/Error/Error.module.scss","components/web/Input/Input.module.scss","components/pages/Play/Play.module.scss","components/game/Game/Game.module.scss","App.module.scss","../../../src/dtos/index.ts","../../../src/dtos/game.dto.ts","../../../src/types/index.ts","configs/keycodes.config.ts","components/web/Button/index.tsx","components/web/Card/index.tsx","components/web/Container/index.tsx","components/web/Error/index.tsx","components/web/Keyboard/index.tsx","types/index.ts","components/web/Input/index.tsx","stores/player.store.ts","stores/focus.store.ts","components/game/Player/index.tsx","components/pages/Home/index.tsx","configs/servers.config.ts","components/chat/Chat/index.tsx","components/game/World/index.tsx","components/game/Game/index.tsx","configs/routes.config.ts","components/pages/Play/index.tsx","App.tsx","index.tsx"],"names":["module","exports","PlayerEvent","Game","MoveDirection","Key","Button","props","className","styles","button","onClick","children","Card","card","Container","cssWidth","width","container","style","Error","error","FocusElement","KeyboardHandler","divEl","useRef","handleKeyUp","useCallback","e","stopPropagation","key","Enter","handlers","onEnter","useEffect","current","onkeyup","ref","Input","inputEl","keyboardHandlers","isFocused","focus","blur","Keyboard","type","placeholder","value","onChange","target","onFocus","onBlur","PlayerStore","createContextStore","name","setPlayerName","action","state","AnimationKey","FocusStore","focusElement","setFocusElement","Home","history","useHistory","player","useStoreState","useStoreActions","actions","useState","localName","setLocalName","setError","handleSubmit","String","length","push","routes","play","path","background","servers","url","Chat","newMessage","setNewMessage","ChatRoom","General","currentRoom","messagesContainerEl","useChat","joinChat","messages","sendMessage","scrollTop","scrollHeight","playerName","handleInputFocus","handleInputBlur","chat","messagesContainer","map","index","content","sender","message","inputContainer","World","ground","setGround","light","setLight","sound","setSound","scene","dispose","BABYLON","loop","autoplay","createSound","depth","CreateGround","height","texture","uScale","vScale","groundMat","diffuseTexture","material","createGround","world","isMoveDirection","z","s","a","indexOf","Player","meshes","setMeshes","animations","setAnimations","currentAnimation","setCurrentAnimation","LoadAssetContainerAsync","then","result","scaling","animationGroups","Walk","speedRatio","Defeat","Idle","Pickup","Punch","ReceiveHit","Shoot","SitDown","StandUp","Victory","WalkCarry","addAllToScene","setAbsolutePosition","position","x","y","switchAnimation","animationKey","animation","stop","keyboardEventHandler","event","KEYDOWN","updateMoveDirection","Forward","Backward","Left","Right","d","updateRotationDirection","RotationDirection","q","None","moveDirection","rotationDirection","keyboardEventObserver","onKeyboardObservable","add","remove","canvasEl","setEngine","setScene","setCamera","useGame","joinGame","engine","camera","lowerRadiusLimit","radius","upperRadiusLimit","lowerHeightOffsetLimit","heightOffset","upperHeightOffsetLimit","rotationOffset","inputs","attachControl","createCamera","handleResize","resize","runRenderLoop","render","window","addEventListener","removeEventListener","game","home","label","component","exact","document","body","overflow","focusChatOnEnter","to","isHidden","Object","values","filter","App","Provider","appContainer","route","i","React","createElement","OnPluginActivatedObservable","addOnce","plugin","animationStartMode","GLTFLoaderAnimationStartMode","NONE","ReactDOM","getElementById"],"mappings":"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","file":"static/js/main.3db3990b.chunk.js","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ChatRoom = exports.ChatEvents = void 0;\n// Reserved names, do not change\nvar SystemEvent;\n(function (SystemEvent) {\n    SystemEvent[\"Connection\"] = \"connection\";\n    SystemEvent[\"Disconnect\"] = \"disconnect\";\n})(SystemEvent || (SystemEvent = {}));\nvar MessageEvent;\n(function (MessageEvent) {\n    MessageEvent[\"Created\"] = \"MessageEvent.Created\";\n})(MessageEvent || (MessageEvent = {}));\nvar MemberEvent;\n(function (MemberEvent) {\n    MemberEvent[\"Created\"] = \"MemberEvent.Created\";\n})(MemberEvent || (MemberEvent = {}));\nconst ChatEvents = {\n    Message: MessageEvent,\n    Member: MemberEvent,\n    System: SystemEvent,\n};\nexports.ChatEvents = ChatEvents;\nvar ChatRoom;\n(function (ChatRoom) {\n    ChatRoom[\"General\"] = \"general\";\n    ChatRoom[\"Trading\"] = \"trading\";\n})(ChatRoom || (ChatRoom = {}));\nexports.ChatRoom = ChatRoom;\n//# sourceMappingURL=index.js.map","// extracted by mini-css-extract-plugin\nmodule.exports = {\"chat\":\"Chat_chat__2XdVQ\",\"messagesContainer\":\"Chat_messagesContainer__3v0Zg\",\"message\":\"Chat_message__4HM0m\",\"sender\":\"Chat_sender__37Y6o\",\"content\":\"Chat_content__2z7us\",\"inputContainer\":\"Chat_inputContainer__2dTI5\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Home_container__1itaz\",\"background\":\"Home_background__1ty4o\"};","\"use strict\";\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst class_transformer_1 = require(\"class-transformer\");\nconst __1 = require(\"..\");\nlet PlayerDTO = class PlayerDTO {\n    constructor() {\n        this.id = null;\n        this.name = '';\n        this.position = {\n            x: 0,\n            y: 0,\n            z: 0,\n        };\n        this.moveDirection = __1.MoveDirection.None;\n        this.rotationDirection = __1.RotationDirection.None;\n    }\n};\n__decorate([\n    class_transformer_1.Expose(),\n    __metadata(\"design:type\", Object)\n], PlayerDTO.prototype, \"id\", void 0);\n__decorate([\n    class_transformer_1.Expose(),\n    __metadata(\"design:type\", Object)\n], PlayerDTO.prototype, \"name\", void 0);\n__decorate([\n    class_transformer_1.Expose(),\n    __metadata(\"design:type\", Object)\n], PlayerDTO.prototype, \"position\", void 0);\n__decorate([\n    class_transformer_1.Expose(),\n    __metadata(\"design:type\", Number)\n], PlayerDTO.prototype, \"moveDirection\", void 0);\n__decorate([\n    class_transformer_1.Expose(),\n    __metadata(\"design:type\", Number)\n], PlayerDTO.prototype, \"rotationDirection\", void 0);\nPlayerDTO = __decorate([\n    class_transformer_1.Exclude()\n], PlayerDTO);\nexports.default = PlayerDTO;\n//# sourceMappingURL=player.dto.js.map","\"use strict\";\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst class_transformer_1 = require(\"class-transformer\");\nlet WorldDTO = class WorldDTO {\n    constructor() {\n        this.id = null;\n        this.width = 0;\n        this.depth = 0;\n    }\n};\n__decorate([\n    class_transformer_1.Expose(),\n    __metadata(\"design:type\", Object)\n], WorldDTO.prototype, \"id\", void 0);\n__decorate([\n    class_transformer_1.Expose(),\n    __metadata(\"design:type\", Object)\n], WorldDTO.prototype, \"width\", void 0);\n__decorate([\n    class_transformer_1.Expose(),\n    __metadata(\"design:type\", Object)\n], WorldDTO.prototype, \"depth\", void 0);\nWorldDTO = __decorate([\n    class_transformer_1.Exclude()\n], WorldDTO);\nexports.default = WorldDTO;\n//# sourceMappingURL=world.dto.js.map","// extracted by mini-css-extract-plugin\nmodule.exports = {\"button\":\"Button_button__2Exp3\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"card\":\"Card_card__3ePwD\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Container_container__3A4y4\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"error\":\"Error_error__3VIr0\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"web\":\"Input_web__bIDRM\",\"chat\":\"Input_chat__LS-5W\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"play\":\"Play_play__1dnXG\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"game\":\"Game_game__3bY7i\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"appContainer\":\"App_appContainer__1hNk1\"};","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.WorldDTO = exports.PlayerDTO = exports.GameDTO = void 0;\nconst game_dto_1 = __importDefault(require(\"./game.dto\"));\nexports.GameDTO = game_dto_1.default;\nconst player_dto_1 = __importDefault(require(\"./player.dto\"));\nexports.PlayerDTO = player_dto_1.default;\nconst world_dto_1 = __importDefault(require(\"./world.dto\"));\nexports.WorldDTO = world_dto_1.default;\n//# sourceMappingURL=index.js.map","\"use strict\";\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst class_transformer_1 = require(\"class-transformer\");\nconst player_dto_1 = __importDefault(require(\"./player.dto\"));\nconst world_dto_1 = __importDefault(require(\"./world.dto\"));\nlet GameDTO = class GameDTO {\n    constructor() {\n        this.players = [];\n        this.world = new world_dto_1.default();\n        this.maxPlayers = 0;\n    }\n};\n__decorate([\n    class_transformer_1.Expose(),\n    class_transformer_1.Type(() => player_dto_1.default),\n    __metadata(\"design:type\", Array)\n], GameDTO.prototype, \"players\", void 0);\n__decorate([\n    class_transformer_1.Expose(),\n    class_transformer_1.Type(() => world_dto_1.default),\n    __metadata(\"design:type\", world_dto_1.default)\n], GameDTO.prototype, \"world\", void 0);\n__decorate([\n    class_transformer_1.Expose(),\n    __metadata(\"design:type\", Object)\n], GameDTO.prototype, \"maxPlayers\", void 0);\nGameDTO = __decorate([\n    class_transformer_1.Exclude()\n], GameDTO);\nexports.default = GameDTO;\n//# sourceMappingURL=game.dto.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.MoveDirection = exports.RotationDirection = exports.GameEvents = void 0;\n// Reserved names, do not change\nvar SystemEvent;\n(function (SystemEvent) {\n    SystemEvent[\"Connection\"] = \"connection\";\n    SystemEvent[\"Disconnect\"] = \"disconnect\";\n})(SystemEvent || (SystemEvent = {}));\nvar PlayerEvent;\n(function (PlayerEvent) {\n    PlayerEvent[\"Created\"] = \"PlayerEvent.Created\";\n    PlayerEvent[\"Deleted\"] = \"PlayerEvent.Deleted\";\n    PlayerEvent[\"Joined\"] = \"PlayerEvent.Joined\";\n    PlayerEvent[\"MoveDirectionUpdated\"] = \"PlayerEvent.MoveDirectionUpdated\";\n    PlayerEvent[\"RotationDirectionUpdated\"] = \"PlayerEvent.RotationDirectionUpdated\";\n})(PlayerEvent || (PlayerEvent = {}));\nvar GameEvent;\n(function (GameEvent) {\n    GameEvent[\"Created\"] = \"GameEvent.Created\";\n    GameEvent[\"Updated\"] = \"GameEvent.Updated\";\n    GameEvent[\"Stopped\"] = \"GameEvent.Stopped\";\n})(GameEvent || (GameEvent = {}));\nexports.GameEvents = {\n    Game: GameEvent,\n    Player: PlayerEvent,\n    System: SystemEvent,\n};\nvar RotationDirection;\n(function (RotationDirection) {\n    RotationDirection[RotationDirection[\"None\"] = 0] = \"None\";\n    RotationDirection[RotationDirection[\"Left\"] = 1] = \"Left\";\n    RotationDirection[RotationDirection[\"Right\"] = 2] = \"Right\";\n})(RotationDirection = exports.RotationDirection || (exports.RotationDirection = {}));\nvar MoveDirection;\n(function (MoveDirection) {\n    MoveDirection[MoveDirection[\"None\"] = 0] = \"None\";\n    MoveDirection[MoveDirection[\"Forward\"] = 1] = \"Forward\";\n    MoveDirection[MoveDirection[\"Backward\"] = 2] = \"Backward\";\n    MoveDirection[MoveDirection[\"Left\"] = 3] = \"Left\";\n    MoveDirection[MoveDirection[\"Right\"] = 4] = \"Right\";\n})(MoveDirection = exports.MoveDirection || (exports.MoveDirection = {}));\n//# sourceMappingURL=index.js.map","export enum Key {\n  Enter = 'Enter',\n  ArrowUp = 'ArrowUp',\n  ArrowDown = 'ArrowDown',\n  ArrowRight = 'ArrowRight',\n  ArrowLeft = 'ArrowLeft',\n  z = 'z',\n  q = 'q',\n  s = 's',\n  d = 'd',\n  a = 'a',\n  e = 'e',\n}\n","import React, { ReactNode } from 'react';\nimport styles from './Button.module.scss';\n\ntype ButtonProps = {\n  children: ReactNode;\n  onClick: () => void;\n};\n\nconst Button: React.FC<ButtonProps> = (props) => {\n  return (\n    <button className={styles.button} onClick={props.onClick}>\n      {props.children}\n    </button>\n  );\n};\n\nexport default Button;\n","import React, { ReactNode } from 'react';\nimport styles from './Card.module.scss';\n\ntype CardProps = {\n  children: ReactNode;\n};\n\nconst Card: React.FC<CardProps> = (props) => {\n  return <div className={styles.card}>{props.children}</div>;\n};\n\nexport default Card;\n","import React, { ReactNode } from 'react';\nimport styles from './Container.module.scss';\n\ntype ContainerProps = {\n  width?: number;\n  children: ReactNode;\n  className?: string;\n};\n\nconst Container: React.FC<ContainerProps> = (props) => {\n  const cssWidth = `calc(${props.width || 1}*100%`;\n\n  return (\n    <div className={`${styles.container} ${props.className}`} style={{ width: cssWidth }}>\n      {props.children}\n    </div>\n  );\n};\n\nexport default Container;\n","import Container from '../Container';\nimport React from 'react';\nimport styles from './Error.module.scss';\n\ntype ErrorProps = {\n  error: string;\n};\n\nconst Error: React.FC<ErrorProps> = (props) => {\n  if (!props.error) {\n    return null;\n  }\n\n  return (\n    <Container>\n      <p className={styles.error}>{props.error}</p>\n    </Container>\n  );\n};\n\nexport default Error;\n","import React, { useCallback, useEffect, useRef } from 'react';\nimport { Key } from '../../../configs/keycodes.config';\n\ntype KeyBoardProps = {\n  handlers: {\n    onEnter?: () => void;\n  };\n};\n\nconst KeyboardHandler: React.FC<KeyBoardProps> = (props) => {\n  const divEl = useRef<HTMLDivElement>(null);\n  const handleKeyUp = useCallback(\n    (e: KeyboardEvent): void => {\n      e.stopPropagation();\n      switch (e.key) {\n        case Key.Enter:\n          props.handlers.onEnter && props.handlers.onEnter();\n          break;\n        default:\n          break;\n      }\n    },\n    [props.handlers],\n  );\n\n  useEffect(() => {\n    if (divEl.current) {\n      divEl.current.onkeyup = handleKeyUp;\n    }\n  }, [divEl.current, handleKeyUp]);\n\n  return <span ref={divEl}>{props.children}</span>;\n};\n\nexport default KeyboardHandler;\n","export enum FocusElement {\n  Chat,\n  Game,\n}\n","import React, { useEffect, useRef } from 'react';\nimport KeyboardHandler from '../Keyboard';\nimport styles from './Input.module.scss';\n\ntype InputType = 'web' | 'chat';\n\ntype InputProps = {\n  value: string;\n  type?: InputType;\n  placeholder?: string;\n  isFocused?: boolean;\n  onChange: (value: string) => void;\n  onEnter?: () => void;\n  onFocus?: () => void;\n  onBlur?: () => void;\n};\n\nconst Input: React.FC<InputProps> = (props) => {\n  const inputEl = useRef<HTMLInputElement>(null);\n  const keyboardHandlers = {\n    onEnter: props.onEnter,\n  };\n\n  useEffect(() => {\n    if (props.isFocused) {\n      inputEl.current?.focus();\n    } else {\n      inputEl.current?.blur();\n    }\n  }, [props.isFocused]);\n\n  return (\n    <KeyboardHandler handlers={keyboardHandlers}>\n      <input\n        ref={inputEl}\n        className={styles[props.type || 'web']}\n        placeholder={props.placeholder}\n        value={props.value}\n        onChange={(e): void => props.onChange(e.target.value)}\n        onFocus={props.onFocus}\n        onBlur={props.onBlur}\n      />\n    </KeyboardHandler>\n  );\n};\n\nexport default Input;\n","import { PlayerDTO } from '@reapers/game-client';\nimport { Action } from 'easy-peasy';\nimport { action, createContextStore } from 'easy-peasy';\n\ntype StoreType = Pick<PlayerDTO, 'name'> & {\n  setPlayerName: Action<StoreType, string>;\n};\n\nconst PlayerStore = createContextStore<StoreType>({\n  name: 'disterflo',\n  setPlayerName: action<StoreType, string>((state, name): void => {\n    state.name = name;\n  }),\n});\n\nexport default PlayerStore;\n","import { Action } from 'easy-peasy';\nimport { action, createContextStore } from 'easy-peasy';\nimport { FocusElement } from '../types';\n\ntype FocusStore = {\n  focusElement: FocusElement;\n  setFocusElement: Action<FocusStore, FocusElement>;\n};\n\nconst FocusStore = createContextStore<FocusStore>({\n  focusElement: FocusElement.Game,\n  setFocusElement: action<FocusStore, FocusElement>((state, focusElement): void => {\n    if (state.focusElement !== focusElement) {\n      state.focusElement = focusElement;\n    }\n  }),\n});\nexport default FocusStore;\n","import React, { useCallback, useEffect, useState } from 'react';\nimport * as BABYLON from '@babylonjs/core';\nimport { MoveDirection, PlayerDTO, RotationDirection } from '@reapers/game-client';\nimport { Key } from '../../../configs/keycodes.config';\n\nenum AnimationKey {\n  Defeat = 0,\n  Idle = 1,\n  Pickup = 2,\n  Punch = 3,\n  ReceiveHit = 4,\n  Shoot = 5,\n  SitDown = 6,\n  StandUp = 7,\n  Victory = 8,\n  Walk = 9,\n  WalkCarry = 10,\n}\n\nconst isRotationDirection = (value: string): boolean => {\n  return ([Key.d, Key.q] as string[]).indexOf(value) != -1;\n};\n\nconst isMoveDirection = (value: string): boolean => {\n  return ([Key.z, Key.s, Key.a, Key.e] as string[]).indexOf(value) != -1;\n};\n\ntype PlayerProps = {\n  scene: BABYLON.Scene | undefined;\n  player: PlayerDTO;\n  updateMoveDirection: (direction: MoveDirection) => void;\n  updateRotationDirection: (direction: RotationDirection) => void;\n};\n\nconst Player: React.FC<PlayerProps> = (props) => {\n  const [meshes, setMeshes] = useState<BABYLON.AbstractMesh[]>([]);\n  const [animations, setAnimations] = useState<Record<AnimationKey, BABYLON.AnimationGroup>>();\n  const [currentAnimation, setCurrentAnimation] = useState<BABYLON.AnimationGroup>();\n\n  useEffect(() => {\n    if (props.scene) {\n      BABYLON.SceneLoader.LoadAssetContainerAsync('/models/', 'characters/player.glb').then(\n        (result) => {\n          result.meshes[0].scaling = new BABYLON.Vector3(0.3, 0.3, -0.3);\n          result.animationGroups[AnimationKey.Walk].speedRatio = 2;\n          setAnimations({\n            [AnimationKey.Defeat]: result.animationGroups[AnimationKey.Defeat],\n            [AnimationKey.Idle]: result.animationGroups[AnimationKey.Idle],\n            [AnimationKey.Pickup]: result.animationGroups[AnimationKey.Pickup],\n            [AnimationKey.Punch]: result.animationGroups[AnimationKey.Punch],\n            [AnimationKey.ReceiveHit]: result.animationGroups[AnimationKey.ReceiveHit],\n            [AnimationKey.Shoot]: result.animationGroups[AnimationKey.Shoot],\n            [AnimationKey.SitDown]: result.animationGroups[AnimationKey.SitDown],\n            [AnimationKey.StandUp]: result.animationGroups[AnimationKey.StandUp],\n            [AnimationKey.Victory]: result.animationGroups[AnimationKey.Victory],\n            [AnimationKey.Walk]: result.animationGroups[AnimationKey.Walk],\n            [AnimationKey.WalkCarry]: result.animationGroups[AnimationKey.WalkCarry],\n          });\n\n          // todo : is it mandatory ?\n          result.addAllToScene();\n\n          setMeshes(result.meshes);\n\n          // todo : uncomment\n          // if (result.meshes[0]) {\n          //   camera.lockedTarget = this._meshes[0];\n          // }\n\n          // todo : was it mandatory ?\n          // scene.onBeforeRenderObservable.add(() => {\n          //   this._update();\n          // });\n        },\n      );\n    }\n  }, [props.scene]);\n\n  useEffect(() => {\n    if (meshes[0]) {\n      meshes[0].setAbsolutePosition(\n        new BABYLON.Vector3(\n          props.player.position.x,\n          props.player.position.y,\n          props.player.position.z,\n        ),\n      );\n    }\n  }, [props.player.position.x, props.player.position.y, props.player.position.z]);\n\n  // currentAnimation is a parameter for optimization purposes\n  const switchAnimation = useCallback(\n    (currentAnimation: BABYLON.AnimationGroup | undefined, animationKey: AnimationKey): void => {\n      if (animations) {\n        const animation = animations[animationKey];\n\n        if (currentAnimation !== animation) {\n          currentAnimation?.stop();\n          setCurrentAnimation(animation);\n          animation?.play(true);\n        }\n      }\n    },\n    [animations, setCurrentAnimation],\n  );\n\n  const keyboardEventHandler = useCallback(\n    ({ type, event }: BABYLON.KeyboardInfo) => {\n      if (type === BABYLON.KeyboardEventTypes.KEYDOWN) {\n        switch (event.key) {\n          case Key.z:\n            props.updateMoveDirection(MoveDirection.Forward);\n            break;\n          case Key.s:\n            props.updateMoveDirection(MoveDirection.Backward);\n            break;\n          case Key.a:\n            props.updateMoveDirection(MoveDirection.Left);\n            break;\n          case Key.e:\n            props.updateMoveDirection(MoveDirection.Right);\n            break;\n          case Key.d:\n            props.updateRotationDirection(RotationDirection.Right);\n            break;\n          case Key.q:\n            props.updateRotationDirection(RotationDirection.Left);\n            break;\n          default:\n            break;\n        }\n\n        if (isMoveDirection(event.key)) {\n          switchAnimation(currentAnimation, AnimationKey.Walk);\n        }\n      } else {\n        if (isMoveDirection(event.key)) {\n          props.updateMoveDirection(MoveDirection.None);\n        } else if (isRotationDirection(event.key)) {\n          props.updateRotationDirection(RotationDirection.None);\n        }\n\n        if (!props.player.moveDirection && !props.player.rotationDirection) {\n          switchAnimation(currentAnimation, AnimationKey.Idle);\n        }\n      }\n    },\n    [props.scene, props.updateMoveDirection, props.updateRotationDirection, switchAnimation],\n  );\n\n  useEffect(() => {\n    if (props.scene) {\n      const keyboardEventObserver = props.scene.onKeyboardObservable.add(keyboardEventHandler);\n\n      return (): void => {\n        props?.scene?.onKeyboardObservable?.remove(keyboardEventObserver);\n      };\n    }\n  }, [keyboardEventHandler]);\n\n  return null;\n};\n\nexport default Player;\n","import React, { useState } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { Button, Card, Container, Error, Input } from '../../web';\nimport { routes } from '../../../configs/routes.config';\nimport { PlayerStore } from '../../../stores';\nimport styles from './Home.module.scss';\n\nconst Home: React.FC = () => {\n  const history = useHistory();\n  const player = PlayerStore.useStoreState((state) => state);\n  const setPlayerName = PlayerStore.useStoreActions((actions) => actions.setPlayerName);\n  const [localName, setLocalName] = useState(player.name);\n  const [error, setError] = useState('');\n\n  const handleNameChange = (value: string): void => {\n    setLocalName(value);\n    setError('');\n  };\n\n  const handleSubmit = (): void => {\n    if (String(localName).length > 0) {\n      setPlayerName(localName);\n      history.push(routes.play.path);\n    } else {\n      setError('A name is required');\n    }\n  };\n\n  return (\n    <div className={styles.container}>\n      <div className={styles.background} />\n      <Container width={1 / 3}>\n        <Card>\n          <Input\n            placeholder=\"Name\"\n            value={localName}\n            onChange={handleNameChange}\n            onEnter={handleSubmit}\n            type=\"web\"\n          />\n          <Error error={error} />\n          <Button onClick={handleSubmit}>Play</Button>\n        </Card>\n      </Container>\n    </div>\n  );\n};\n\nexport default Home;\n","export const servers = {\n  game: {\n    url: 'ws://localhost:4001',\n  },\n  chat: {\n    url: 'ws://localhost:4002',\n  },\n};\n","import { ChatRoom, useChat } from '@reapers/chat-client';\nimport React, { useCallback, useEffect, useRef, useState } from 'react';\nimport { servers } from '../../../configs/servers.config';\nimport { FocusStore } from '../../../stores';\nimport { FocusElement } from '../../../types';\nimport { Input } from '../../web';\nimport styles from './Chat.module.scss';\n\ntype ChatProps = {\n  playerName: string;\n};\n\nconst Chat: React.FC<ChatProps> = (props) => {\n  const [newMessage, setNewMessage] = useState('');\n  const [currentRoom] = useState<ChatRoom>(ChatRoom.General);\n  const messagesContainerEl = useRef<HTMLDivElement>(null);\n  const setFocusElement = FocusStore.useStoreActions((actions) => actions.setFocusElement);\n  const focusElement = FocusStore.useStoreState((state) => state.focusElement);\n  const { joinChat, messages, sendMessage } = useChat(servers.chat.url);\n\n  useEffect(() => {\n    if (messagesContainerEl.current) {\n      messagesContainerEl.current.scrollTop = messagesContainerEl.current.scrollHeight;\n    }\n  }, [messagesContainerEl.current, messages]);\n\n  useEffect((): void => {\n    joinChat(props.playerName);\n  }, [joinChat, props.playerName]);\n\n  const handleInputEnter = (): void => {\n    if (newMessage.length) {\n      sendMessage(currentRoom, newMessage);\n      setNewMessage('');\n    } else {\n      setFocusElement(FocusElement.Game);\n    }\n  };\n\n  const handleInputFocus = useCallback(() => {\n    setFocusElement(FocusElement.Chat);\n  }, [setFocusElement]);\n\n  const handleInputBlur = useCallback(() => {\n    setFocusElement(FocusElement.Game);\n  }, [setFocusElement]);\n\n  return (\n    <div className={styles.chat}>\n      <div className={styles.messagesContainer} ref={messagesContainerEl}>\n        {messages.map(({ content, sender }, index) => (\n          <p key={index} className={styles.message}>\n            <span className={styles.sender}>{sender}</span>&nbsp;:&nbsp;\n            <span className={styles.message}>{content}</span>\n          </p>\n        ))}\n      </div>\n      <div className={styles.inputContainer}>\n        <Input\n          value={newMessage}\n          onChange={setNewMessage}\n          onEnter={handleInputEnter}\n          isFocused={focusElement === FocusElement.Chat}\n          onFocus={handleInputFocus}\n          onBlur={handleInputBlur}\n          type=\"chat\"\n        />\n      </div>\n    </div>\n  );\n};\n\nexport default Chat;\n","import React, { useEffect, useState } from 'react';\nimport * as BABYLON from '@babylonjs/core';\nimport { WorldDTO } from '@reapers/game-client';\n\nconst createLight = (scene: BABYLON.Scene): BABYLON.HemisphericLight => {\n  return new BABYLON.HemisphericLight('light', new BABYLON.Vector3(0, 1, 0), scene);\n};\n\nconst createSound = (scene: BABYLON.Scene): BABYLON.Sound => {\n  return new BABYLON.Sound('cello', '/sounds/battle.wav', scene, null, {\n    loop: true,\n    autoplay: false,\n  });\n};\n\nconst createGround = (width: number, depth: number, scene: BABYLON.Scene): BABYLON.Mesh => {\n  const ground = BABYLON.MeshBuilder.CreateGround('ground', { width, height: depth });\n  const texture = new BABYLON.Texture('/textures/ground.png', scene);\n  texture.uScale = 10;\n  texture.vScale = 10;\n  const groundMat = new BABYLON.StandardMaterial('groundMat', scene);\n  groundMat.diffuseTexture = texture;\n  ground.material = groundMat;\n\n  return ground;\n};\n\ntype WorldProps = {\n  scene: BABYLON.Scene | undefined;\n  world: WorldDTO;\n};\n\nconst World: React.FC<WorldProps> = (props) => {\n  const [ground, setGround] = useState<BABYLON.Mesh>();\n  const [light, setLight] = useState<BABYLON.HemisphericLight>();\n  const [sound, setSound] = useState<BABYLON.Sound>();\n\n  useEffect(() => {\n    if (props.scene) {\n      light?.dispose();\n      setLight(createLight(props.scene));\n\n      sound?.dispose();\n      setSound(createSound(props.scene));\n    }\n  }, [props.scene]);\n\n  useEffect(() => {\n    if (props.scene) {\n      ground?.dispose();\n\n      setGround(createGround(props.world.width, props.world.depth, props.scene));\n    }\n  }, [props.world.depth, props.world.width]);\n\n  return null;\n};\n\nexport default World;\n","import React, { useEffect, useRef, useState } from 'react';\nimport { useGame } from '@reapers/game-client';\nimport * as BABYLON from '@babylonjs/core';\nimport styles from './Game.module.scss';\nimport { FocusStore } from '../../../stores';\nimport { FocusElement } from '../../../types';\nimport { servers } from '../../../configs/servers.config';\nimport World from '../World';\nimport Player from '../Player';\n\ntype GameProps = {\n  playerName: string;\n};\n\nconst createCamera = (scene: BABYLON.Scene): BABYLON.FollowCamera => {\n  const camera = new BABYLON.FollowCamera('playerCamera', new BABYLON.Vector3(0, 2, -2), scene);\n\n  camera.lowerRadiusLimit = 2;\n  camera.radius = 5;\n  camera.upperRadiusLimit = 5;\n\n  camera.lowerHeightOffsetLimit = 1;\n  camera.heightOffset = 3;\n  camera.upperHeightOffsetLimit = 4;\n\n  camera.rotationOffset = 0;\n\n  camera.inputs.add;\n  camera.attachControl(true);\n\n  return camera;\n};\n\nconst Game: React.FC<GameProps> = (props) => {\n  const canvasEl = useRef<HTMLCanvasElement>(null);\n  const [engine, setEngine] = useState<BABYLON.Engine>();\n  const [scene, setScene] = useState<BABYLON.Scene>();\n  const [camera, setCamera] = useState<BABYLON.FollowCamera>();\n  const { joinGame, player, updateMoveDirection, updateRotationDirection, world } = useGame(\n    servers.game.url,\n  );\n  const focusElement = FocusStore.useStoreState((state) => state.focusElement);\n\n  useEffect((): void => {\n    joinGame(props.playerName);\n  }, [joinGame, props.playerName]);\n\n  useEffect(() => {\n    if (canvasEl.current) {\n      const engine = new BABYLON.Engine(canvasEl.current, true);\n      const scene = new BABYLON.Scene(engine);\n      const camera = createCamera(scene);\n      const handleResize = (): void => engine.resize();\n\n      engine.runRenderLoop(function () {\n        scene.render();\n      });\n      setEngine(engine);\n      setScene(scene);\n      setCamera(camera);\n\n      window.addEventListener('resize', handleResize);\n\n      return (): void => {\n        window.removeEventListener('resize', handleResize);\n      };\n    }\n  }, []);\n\n  useEffect(() => {\n    if (focusElement === FocusElement.Game) {\n      canvasEl.current?.focus();\n    } else {\n      canvasEl.current?.blur();\n    }\n  }, [focusElement]);\n\n  return (\n    <div className={styles.game}>\n      <canvas ref={canvasEl} />\n      <World world={world} scene={scene} />\n      <Player\n        player={player}\n        scene={scene}\n        updateMoveDirection={updateMoveDirection}\n        updateRotationDirection={updateRotationDirection}\n      />\n    </div>\n  );\n};\n\nexport default Game;\n","import React from 'react';\nimport { Home, Play } from '../components/pages';\n\ntype Route = 'home' | 'play';\n\ntype AppRouteProps = {\n  path: string;\n  label: string;\n  component: React.FC;\n  exact?: boolean;\n  isHidden?: boolean;\n};\n\nexport const routes: Record<Route, AppRouteProps> = {\n  home: {\n    path: '/',\n    label: 'Home',\n    component: Home,\n    exact: true,\n  },\n\n  play: {\n    path: '/play',\n    label: 'Play',\n    component: Play,\n    exact: true,\n    isHidden: true,\n  },\n};\n\nexport const visibleRoutes = Object.values(routes).filter(({ isHidden }) => !isHidden);\n","import React, { useEffect } from 'react';\nimport { Redirect } from 'react-router-dom';\nimport { routes } from '../../../configs/routes.config';\nimport { FocusStore, PlayerStore } from '../../../stores';\nimport { Chat } from '../../chat';\nimport styles from './Play.module.scss';\nimport { Game } from '../../game';\nimport { Key } from '../../../configs/keycodes.config';\nimport { FocusElement } from '../../../types';\n\nconst Play: React.FC = () => {\n  const player = PlayerStore.useStoreState((state) => state);\n  const focusElement = FocusStore.useStoreState((state) => state.focusElement);\n  const setFocusElement = FocusStore.useStoreActions((actions) => actions.setFocusElement);\n\n  useEffect(() => {\n    document.body.style.overflow = 'hidden';\n  }, [document]);\n\n  useEffect(() => {\n    const focusChatOnEnter = (e: KeyboardEvent): void => {\n      if (e.key === Key.Enter && focusElement !== FocusElement.Chat) {\n        setFocusElement(FocusElement.Chat);\n      }\n    };\n\n    window.addEventListener('keyup', focusChatOnEnter);\n\n    return (): void => {\n      window.removeEventListener('keyup', focusChatOnEnter);\n    };\n  }, [window, focusElement, setFocusElement]);\n\n  if (!String(player.name).length) {\n    return <Redirect to={routes.home.path} />;\n  }\n\n  return (\n    <div className={styles.play}>\n      <Chat playerName={player.name} />\n      <Game playerName={player.name} />\n    </div>\n  );\n};\n\nexport default Play;\n","import React from 'react';\nimport { BrowserRouter as Router, Switch, Route, Redirect } from 'react-router-dom';\nimport { routes } from './configs/routes.config';\nimport { FocusStore, PlayerStore } from './stores';\nimport styles from './App.module.scss';\n\nconst App: React.FC = () => {\n  return (\n    <Router>\n      <PlayerStore.Provider>\n        <FocusStore.Provider>\n          <div className={styles.appContainer}>\n            {/* <div className=\"app-main-nav\">\n              {visibleRoutes.map((route, i) => (\n                <NavLink\n                  key={i}\n                  to={route.path}\n                  exact={route.exact}\n                  activeClassName=\"is-active\"\n                  className=\"menu-item\"\n                >\n                  {route.label}\n                </NavLink>\n              ))}\n            </div> */}\n\n            <div className=\"page-container\">\n              <Switch>\n                {Object.values(routes).map((route, i) => (\n                  <Route\n                    key={i}\n                    path={route.path}\n                    exact={route.exact}\n                    render={(props): React.ReactNode => {\n                      return React.createElement(route.component, {\n                        ...props,\n                        key: i,\n                      });\n                    }}\n                  />\n                ))}\n                <Route path=\"*\">\n                  <Redirect to={routes.home.path} />\n                </Route>\n              </Switch>\n            </div>\n          </div>\n        </FocusStore.Provider>\n      </PlayerStore.Provider>\n    </Router>\n  );\n};\n\nexport default App;\n","import ReactDOM from 'react-dom';\n// import '@babylonjs/loaders';\nimport { GLTFFileLoader, GLTFLoaderAnimationStartMode } from '@babylonjs/loaders';\nimport * as BABYLON from '@babylonjs/core';\nimport App from './App';\n\nBABYLON.SceneLoader.OnPluginActivatedObservable.addOnce(function (plugin) {\n  const loader = (plugin as unknown) as GLTFFileLoader;\n  loader.animationStartMode = GLTFLoaderAnimationStartMode.NONE;\n});\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}